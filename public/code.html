<!DOCTYPE html>
<html>
<head>
  <title>LUNA Pairing</title>
</head>
<body>
  <h2>LUNA Pairing</h2>
  <input type="text" id="code" readonly>
  <button onclick="copyCode()">Copy Code</button>

  <script>
    async function getCode() {
      const number = prompt("Enter your number with country code:");
      const response = await fetch(`/code?number=${number}`);
      const data = await response.json();
      document.getElementById("code").value = data.code;
      alert("Pairing code displayed! Session ID will be sent to your WhatsApp inbox after linking.");
    }

    function copyCode() {
      const codeInput = document.getElementById("code");
      codeInput.select();
      codeInput.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(codeInput.value);
      alert("âœ… Code copied!");
    }

    getCode();
  </script>
</body>
</html>
